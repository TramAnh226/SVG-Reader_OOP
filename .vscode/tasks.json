{
    "version": "2.0.0",
    "tasks": [
        // --- 1. BIÊN DỊCH TẤT CẢ CÁC FILE .cpp THÀNH .o (COMPILE ALL) ---
        {
            "label": "Compile All Cpp Files (Debug)",
            "type": "shell",
            "command": "g++",
            "args": [
                // Các cờ biên dịch giữ nguyên
                "-Wall",
                "-Wextra",
                "-Wpedantic",
                "-Wshadow",
                "-Wformat=2",
                "-Wcast-align",
                "-Wconversion",
                "-Wsign-conversion",
                "-Wnull-dereference",
                "-g3",
                "-O0",
                "-c", // Chỉ biên dịch, không liên kết
                // CỜ INCLUDE PATH: Cần thiết để g++ tìm thấy tất cả các file .h
                "-I.",
                "-I./SVGDocument/SVG_H",
                "-I./SVGElement/SVG_H",
                "-I./SVGGroup_Factory/SVG_H",
                "-I./SVGParser/include",

                // >>> LIỆT KÊ TẤT CẢ CÁC FILE .cpp CẦN BIÊN DỊCH <<<
                "Demo_main.cpp",
                
                // SVG ELEMENT (Hình học và tiện ích)
                "./SVGElement/SVG_CPP/CustomColor.cpp",
                "./SVGElement/SVG_CPP/CustomPoint.cpp",
                "./SVGElement/SVG_CPP/Stroke.cpp",
                "./SVGElement/SVG_CPP/SVGElement.cpp",
                "./SVGElement/SVG_CPP/SVGCircle.cpp",
                "./SVGElement/SVG_CPP/SVGEllipse.cpp",
                "./SVGElement/SVG_CPP/SVGLine.cpp",
                "./SVGElement/SVG_CPP/SVGPolygon.cpp",
                "./SVGElement/SVG_CPP/SVGPolyline.cpp",
                "./SVGElement/SVG_CPP/SVGPolyshapeBase.cpp",
                "./SVGElement/SVG_CPP/SVGRectangle.cpp",
                "./SVGElement/SVG_CPP/SVGSquare.cpp",
                "./SVGElement/SVG_CPP/SVGStyle.cpp",
                "./SVGElement/SVG_CPP/SVGText.cpp",
                
                // CÁC MODULE CHÍNH
                "./SVGParser/source/SVGParser.cpp",
                "./SVGRenderer/SVGRenderer.cpp",
                "./SVGGroup_Factory/SVG_CPP/SVGGroup.cpp",
                "./SVGDocument/SVG_CPP/SVGDocument.cpp",
                // Xử lý TinyXML2
                "./SVGParser/source/tinyxml2.cpp", 
                
                "-o",
                "./build/Debug/%.o" // Xuất file đối tượng vào thư mục Debug
            ],
            "group": "build",
            "problemMatcher": ["$gcc"],
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            }
        },
        // --- 2. LIÊN KẾT TẤT CẢ CÁC FILE .o VỚI THƯ VIỆN (LINK ALL) ---
        {
            "label": "Link Project Debug",
            "type": "shell",
            "command": "g++",
            "args": [
                // LIÊN KẾT TẤT CẢ CÁC FILE .o ĐÃ BIÊN DỊCH
                "./build/Debug/*.o", 
                
                // CỜ LINKER BẮT BUỘC CHO WINDOWS/GDI+
                "-o",
                "./build/Debug/outDebug.exe",
                
                "-mwindows", // KHẮC PHỤC LỖI ENTRY POINT WinMain 
                
                "-lgdiplus", // Thư viện GDI+
                "-luser32",  // Windows API
                "-lgdi32",   // Windows API
                "-lstdc++"   // Cho các cấu trúc STL
            ],
            "dependsOn": [
                "Compile All Cpp Files (Debug)"
            ],
            "problemMatcher": ["$gcc"],
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            }
        },
        // --- 3. BUILD AND LINK (Task Tổng hợp) ---
        {
            "label": "Build and Link Debug",
            "dependsOn": [
                "Link Project Debug"
            ],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            }
        },
        // --- 4. RUN (Task Chạy file .exe) ---
        {
            "label": "Run Debug",
            "type": "shell",
            "command": "./build/Debug/outDebug.exe",
            "problemMatcher": [],
            "presentation": {
                "reveal": "always",
                "panel": "shared"
            }
        }
    ]
}